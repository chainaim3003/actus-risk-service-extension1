{
  "info": {
    "_postman_id": "swppv-he-90d-001",
    "name": "SupplyChain-SWPPV-HedgeEffectiveness-90d",
    "description": "ACTUS SWPPV contract: HEDGE EFFECTIVENESS single-factor simulation.\n\n$10M plain vanilla IRS, CN-electronics corridor.\nEffectiveness breach on SWPPV.\n\nPer ACTUS official documentation:\n- SWPPV: nominalInterestRate (fixed IPFX) + nominalInterestRate2 (floating IPFL)\n- See: https://documentation.actusfrf.org/docs/examples/basic-contract-types/example_SWPPV\n\nRisk Factor: HEDGE EFFECTIVENESS model only (single dimension).\nBehavioral model from Risk-Factor-2.md Domain 2: Tariff/Trade Finance.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Add Tariff Index (CN-electronics)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addReferenceIndex",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addReferenceIndex"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"riskFactorID\":\"TARIFF_IDX_CN_01\",\"marketObjectCode\":\"TARIFF_INDEX_CN\",\"base\":1.0,\"data\":[{\"time\":\"2026-03-01T00:00:00\",\"value\":0.25},{\"time\":\"2026-03-10T00:00:00\",\"value\":0.28},{\"time\":\"2026-03-15T00:00:00\",\"value\":0.32},{\"time\":\"2026-03-20T00:00:00\",\"value\":0.37},{\"time\":\"2026-03-25T00:00:00\",\"value\":0.42},{\"time\":\"2026-03-31T00:00:00\",\"value\":0.45},{\"time\":\"2026-04-10T00:00:00\",\"value\":0.45},{\"time\":\"2026-04-20T00:00:00\",\"value\":0.42},{\"time\":\"2026-04-30T00:00:00\",\"value\":0.38},{\"time\":\"2026-05-10T00:00:00\",\"value\":0.35},{\"time\":\"2026-05-20T00:00:00\",\"value\":0.32},{\"time\":\"2026-05-31T00:00:00\",\"value\":0.3}]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 TARIFF_IDX_CN_01: CN-electronics tariff loaded');});"
            ]
          }
        }
      ]
    },
    {
      "name": "2. Add USD_CNY",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addReferenceIndex",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addReferenceIndex"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"riskFactorID\":\"FX_USDCNY_01\",\"marketObjectCode\":\"USD_CNY\",\"base\":1.0,\"data\":[{\"time\":\"2026-03-01T00:00:00\",\"value\":7.25},{\"time\":\"2026-03-10T00:00:00\",\"value\":7.32},{\"time\":\"2026-03-15T00:00:00\",\"value\":7.4},{\"time\":\"2026-03-20T00:00:00\",\"value\":7.52},{\"time\":\"2026-03-25T00:00:00\",\"value\":7.65},{\"time\":\"2026-03-31T00:00:00\",\"value\":7.78},{\"time\":\"2026-04-10T00:00:00\",\"value\":7.85},{\"time\":\"2026-04-20T00:00:00\",\"value\":7.8},{\"time\":\"2026-04-30T00:00:00\",\"value\":7.7},{\"time\":\"2026-05-10T00:00:00\",\"value\":7.55},{\"time\":\"2026-05-20T00:00:00\",\"value\":7.45},{\"time\":\"2026-05-31T00:00:00\",\"value\":7.35}]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 USD/CNY FX rate loaded');});"
            ]
          }
        }
      ]
    },
    {
      "name": "3. Add CURRENT_EXPOSURE",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addReferenceIndex",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addReferenceIndex"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"riskFactorID\":\"EXPOSURE_01\",\"marketObjectCode\":\"CURRENT_EXPOSURE\",\"base\":1.0,\"data\":[{\"time\":\"2026-03-01T00:00:00\",\"value\":10000000},{\"time\":\"2026-03-10T00:00:00\",\"value\":10300000},{\"time\":\"2026-03-20T00:00:00\",\"value\":11200000},{\"time\":\"2026-03-31T00:00:00\",\"value\":12800000},{\"time\":\"2026-04-10T00:00:00\",\"value\":14000000},{\"time\":\"2026-04-20T00:00:00\",\"value\":13500000},{\"time\":\"2026-04-30T00:00:00\",\"value\":12800000},{\"time\":\"2026-05-10T00:00:00\",\"value\":11800000},{\"time\":\"2026-05-20T00:00:00\",\"value\":11000000},{\"time\":\"2026-05-31T00:00:00\",\"value\":10500000}]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 Tariff-inflated exposure loaded');});"
            ]
          }
        }
      ]
    },
    {
      "name": "4. Add USD_SOFR",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addReferenceIndex",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addReferenceIndex"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"riskFactorID\":\"SOFR_IDX_01\",\"marketObjectCode\":\"USD_SOFR\",\"base\":1.0,\"data\":[{\"time\":\"2026-03-01T00:00:00\",\"value\":0.043},{\"time\":\"2026-03-15T00:00:00\",\"value\":0.043},{\"time\":\"2026-03-31T00:00:00\",\"value\":0.044},{\"time\":\"2026-04-15T00:00:00\",\"value\":0.045},{\"time\":\"2026-04-30T00:00:00\",\"value\":0.046},{\"time\":\"2026-05-15T00:00:00\",\"value\":0.045},{\"time\":\"2026-05-31T00:00:00\",\"value\":0.044}]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 SOFR reference rate loaded');});"
            ]
          }
        }
      ]
    },
    {
      "name": "5. Add HEDGE EFFECTIVENESS Model",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addHedgeEffectivenessModel",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addHedgeEffectivenessModel"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"riskFactorId\":\"he_swppv_CN_01\",\"tariffIndexMOC\":\"TARIFF_INDEX_CN\",\"fxRateMOC\":\"USD_CNY\",\"hedgedNotional\":10000000,\"currentExposureMOC\":\"CURRENT_EXPOSURE\",\"lowerEffectivenessBound\":0.8,\"upperEffectivenessBound\":1.25,\"tariffExposureSensitivity\":0.6,\"monitoringEventTimes\":[\"2026-03-01T00:00:00\",\"2026-03-15T00:00:00\",\"2026-03-31T00:00:00\",\"2026-04-15T00:00:00\",\"2026-04-30T00:00:00\",\"2026-05-15T00:00:00\",\"2026-05-31T00:00:00\"]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 he_swppv_CN_01: HEDGE EFFECTIVENESS model loaded');});"
            ]
          }
        }
      ]
    },
    {
      "name": "6. Add Scenario",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8082/addScenario",
          "protocol": "http",
          "host": [
            "localhost:8082"
          ],
          "path": [
            "addScenario"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"scenarioID\":\"swppv_he_CN_scn01\",\"riskFactorDescriptors\":[{\"riskFactorID\":\"TARIFF_IDX_CN_01\",\"riskFactorType\":\"ReferenceIndex\"},{\"riskFactorID\":\"FX_USDCNY_01\",\"riskFactorType\":\"ReferenceIndex\"},{\"riskFactorID\":\"SOFR_IDX_01\",\"riskFactorType\":\"ReferenceIndex\"},{\"riskFactorID\":\"EXPOSURE_01\",\"riskFactorType\":\"ReferenceIndex\"},{\"riskFactorID\":\"he_swppv_CN_01\",\"riskFactorType\":\"HedgeEffectivenessModel\"}]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('OK',function(){pm.response.to.have.status(200);console.log('\\u2705 swppv_he_CN_scn01: scenario created');});"
            ]
          }
        }
      ]
    },
    {
      "name": "7. Run SWPPV HEDGE EFFECTIVENESS Simulation",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "http://localhost:8083/rf2/scenarioSimulation",
          "protocol": "http",
          "host": [
            "localhost:8083"
          ],
          "path": [
            "rf2",
            "scenarioSimulation"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"contracts\":[{\"contractType\":\"SWPPV\",\"contractID\":\"SWPPV-HE-CN-electronics-01\",\"statusDate\":\"2026-02-28T00:00:00\",\"contractRole\":\"RF\",\"currency\":\"USD\",\"contractDealDate\":\"2026-02-28T00:00:00\",\"initialExchangeDate\":\"2026-03-01T00:00:00\",\"maturityDate\":\"2026-05-31T00:00:00\",\"notionalPrincipal\":10000000,\"cycleAnchorDateOfInterestPayment\":\"2026-03-31T00:00:00\",\"cycleOfInterestPayment\":\"P1ML1\",\"nominalInterestRate\":0.05,\"nominalInterestRate2\":0.043,\"dayCountConvention\":\"A365\",\"cycleAnchorDateOfRateReset\":\"2026-03-01T00:00:00\",\"rateSpread\":0.0,\"marketObjectCodeOfRateReset\":\"USD_SOFR\",\"fixingPeriod\":\"P0D\",\"deliverySettlement\":\"D\",\"tariffModels\":[\"he_swppv_CN_01\"]}],\"scenarioDescriptor\":{\"scenarioID\":\"swppv_he_CN_scn01\",\"scenarioType\":\"scenario\"},\"simulateTo\":\"2026-05-31T00:00:00\",\"monitoringTimes\":[]}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('Simulation success',function(){",
              "    pm.response.to.have.status(200);",
              "    var data=pm.response.json();",
              "    pm.expect(data[0].status).to.eql('Success');",
              "    var events=data[0].events;",
              "    console.log('\\u2550'.repeat(60));",
              "    console.log('SWPPV \\u2014 HEDGE EFFECTIVENESS (Single Factor)');",
              "    console.log('  Contract: $10M plain vanilla IRS');",
              "    console.log('  Receive Fixed 5.0% (IPFX) | Pay Floating SOFR+0bps (IPFL)');",
              "    console.log('  Corridor: CN-electronics');",
              "    console.log('  Scenario: Effectiveness breach on SWPPV');",
              "    console.log('\\u2550'.repeat(60));",
              "    console.log('Total events: '+events.length);",
              "    var c={};events.forEach(function(e){c[e.type]=(c[e.type]||0)+1;});",
              "    Object.keys(c).forEach(function(k){console.log('  '+k+': '+c[k]);});",
              "    console.log('');console.log('ALL EVENTS:');",
              "    events.forEach(function(e){console.log('  '+e.time+' '+e.type+' payoff=$'+e.payoff.toFixed(2)+' nominal='+e.nominalValue.toFixed(2)+' rate='+(e.nominalRate||0).toFixed(6));});",
              "    var ips=events.filter(function(e){return e.type==='IP'||e.type==='IPFX'||e.type==='IPFL';});",
              "    if(ips.length>0){console.log('');console.log('INTEREST/SWAP PAYMENTS:');",
              "        ips.forEach(function(m){console.log('  '+m.time+' '+m.type+' $'+m.payoff.toFixed(2)+' rate='+(m.nominalRate||0).toFixed(6));});}",
              "    var pps=events.filter(function(e){return e.type==='PP'||e.type==='MRD';});",
              "    if(pps.length>0){console.log('');console.log('BEHAVIORAL CALLOUTS:');",
              "        pps.forEach(function(m){console.log('  '+m.time+' '+m.type+' payoff=$'+m.payoff.toFixed(2));});}",
              "});"
            ]
          }
        }
      ]
    }
  ]
}